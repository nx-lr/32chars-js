"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_taggedTemplateLiteral2=_interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral")),_voca=_interopRequireDefault(require("voca")),_lodash=_interopRequireDefault(require("lodash")),_fs=_interopRequireDefault(require("fs")),_isValidIdentifier=_interopRequireDefault(require("is-valid-identifier")),_jsesc=_interopRequireDefault(require("jsesc")),_xregexp=_interopRequireDefault(require("xregexp")),_templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16;function ownKeys(t,e){var a,r=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){(0,_defineProperty2.default)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function _createForOfIteratorHelper(e,t){var a,r,n,o,c="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(c)return r=!(a=!0),{s:function(){c=c.call(e)},n:function(){var e=c.next();return a=e.done,e},e:function(e){r=!0,n=e},f:function(){try{a||null==c.return||c.return()}finally{if(r)throw n}}};if(Array.isArray(e)||(c=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return c&&(e=c),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var a;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(a="Object"===(a=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var print=console.log,text=_fs.default.readFileSync("./input.txt","utf8");function encodeText(code,globalVar){var _code$match,_ref36,_ref37,_ref=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_ref$strictMode=_ref.strictMode,strictMode=void 0!==_ref$strictMode&&_ref$strictMode,_ref$quoteStyle=_ref.quoteStyle,quoteStyle=void 0===_ref$quoteStyle?"":_ref$quoteStyle,_ref$accessor=_ref.accessor,accessor=void 0!==_ref$accessor&&_ref$accessor,BUILTINS=RegExp("^\\b("+["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","exports","Float32Array","Float64Array","Function","Generator","GeneratorFunction","globalThis","Infinity","Int16Array","Int32Array","Int8Array","Intl","isFinite","isNaN","JSON","Map","Math","module","NaN","Number","Object","parseFloat","parseInt","Promise","Proxy","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","this","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","undefined","unescape","WeakMap","WeakSet","WebAssembly"].join(_templateObject=_templateObject||(0,_taggedTemplateLiteral2.default)(["|"]))+")\\b$"),REGEXPS={word:(0,_xregexp.default)(String.raw(_templateObject2=_templateObject2||(0,_taggedTemplateLiteral2.default)(["[pLpN]+"],["[\\pL\\pN]+"])),"g"),symbol:/[!-\/:-@[-`{-~]+/g,unicode:/[^ -~]+/g},REGEXP=RegExp(Object.entries(REGEXPS).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0],e=e[1].source;return"(?<".concat(t,">").concat(e,")")}).join(_templateObject3=_templateObject3||(0,_taggedTemplateLiteral2.default)(["|"])),"g"),checkIdentifier=function(e){return(e=e.trim())&&(0,_isValidIdentifier.default)(e)&&!BUILTINS.test(e)};if(!checkIdentifier(globalVar))throw new Error("Invalid global variable: ".concat(quote(globalVar)));var MAX_STRING_LENGTH=536870888,enUS=Intl.NumberFormat("en-us");if(code.length>MAX_STRING_LENGTH)throw new Error("Input string can only be up to ".concat(enUS.format(NODE_MAX_LENGTH)," characters long"));for(var count=0,quote=function(e){var t=quoteStyle.match(/\b(single|double|backtick)\b/g)||["single"],a=(quoteStyle.match(/\b(cycle|only|smart|random)\b/g)||["smart"])[0],r=(0,_jsesc.default)(e,{quotes:"single",wrap:!0}),n=(0,_jsesc.default)(e,{quotes:"double",wrap:!0}),o=(0,_jsesc.default)(e,{quotes:"backtick",wrap:!0});switch(a){case"only":var c=t[0];return(0,_jsesc.default)(e,{quotes:c,wrap:!0});case"cycle":c=t[count++%t.length];return(0,_jsesc.default)(e,{quotes:c,wrap:!0});case"random":c=Math.random()>2/3?"backtick":Math.random()>1/3?"double":"single";return(0,_jsesc.default)(e,{quotes:c,wrap:!0});case"smart":var l=[["single",r],["double",n],["backtick",o]].map(function(e){e=(0,_slicedToArray2.default)(e,2);return[e[0],e[1].length]}).sort(function(e,t){return(0,_slicedToArray2.default)(e,2)[1]-(0,_slicedToArray2.default)(t,2)[1]}),c=(l.every(function(e){return e[1]==l[0][1]})?t:l[0])[0];return(0,_jsesc.default)(e,{quotes:c,wrap:!0})}},LETTERS="abcdefghijklmnopqrstuvwxyz",CIPHER=";.!:_-,?/'*+#%&^\"|~$=<>`@\\",SPACE="-",encodeLetter=function(e){return(_voca.default.isUpperCase(e)?"$":"_")+CIPHER[LETTERS.indexOf(e.toLowerCase())]},encodeDigit=function(e){return(0,_toConsumableArray2.default)((+e).toString(2).padStart(3,0)).map(function(e){return 1==e?"$":"_"}).join(_templateObject4=_templateObject4||(0,_taggedTemplateLiteral2.default)([""]))},CONSTANTS={true:"!".concat(quote("")),false:"![]",undefined:"[][[]]",Infinity:"!".concat(quote(""),"/![]"),NaN:"+{}","[object Object]":"{}"},quoteKey=function(e){var t,a=quoteStyle.match(/\b(single|double|backtick)\b/g)||["single"],r=(quoteStyle.match(/\b(cycle|only|smart|random)\b/g)||["smart"])[0],n=(0,_jsesc.default)(e,{quotes:"single",wrap:!0}),o=(0,_jsesc.default)(e,{quotes:"double",wrap:!0}),c=(0,_jsesc.default)(e,{quotes:"backtick",wrap:!0});switch(r){case"only":var l=a[0];return"backtick"==l?"[".concat(c,"]"):(0,_jsesc.default)(e,{quotes:l,wrap:!0});case"cycle":var l=a[count++%a.length];return"backtick"==l?"[".concat(c,"]"):(0,_jsesc.default)(e,{quotes:l,wrap:!0});case"random":l=Math.random()>2/3?"backtick":Math.random()>1/3?"double":"single";return"backtick"==l?"[".concat(c,"]"):(0,_jsesc.default)(e,{quotes:l,wrap:!0});case"smart":return(0,_isValidIdentifier.default)(e)?e:(l=((t=[["single",n],["double",o]].map(function(e){e=(0,_slicedToArray2.default)(e,2);return[e[0],e[1].length]}).sort(function(e,t){return(0,_slicedToArray2.default)(e,2)[1]-(0,_slicedToArray2.default)(t,2)[1]})[0]).every(function(e){return e[1]==t[0][1]})?a:t[0])[0],(0,_jsesc.default)(e,{quotes:l,wrap:!0}))}},output="".concat(strictMode?"var ".concat(globalVar,",_").concat(globalVar).concat(accessor?",$".concat(globalVar):"",";"):"").concat(globalVar,"=~[];"),CHARSET_1=(accessor&&(output+="$".concat(globalVar,"=([_").concat(globalVar,"])=>").concat(globalVar,"[_").concat(globalVar,"];")),{}),_i=0,_Object$entries=Object.entries(CONSTANTS);_i<_Object$entries.length;_i++){var _Object$entries$_i=(0,_slicedToArray2.default)(_Object$entries[_i],2),constant=_Object$entries$_i[0],_expression=_Object$entries$_i[1],_iterator=_createForOfIteratorHelper(constant),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _char2=_step.value;!/[\w\s]/.test(_char2)||_char2 in CHARSET_1||(CHARSET_1[_char2]=[_expression,constant.indexOf(_char2)])}}catch(err){_iterator.e(err)}finally{_iterator.f()}}for(var RES_CHARSET_1="".concat(globalVar,"={")+(0,_toConsumableArray2.default)(Array(10)).map(function(e,t){return["".concat(encodeDigit(t),":`${++").concat(globalVar,"}`")].concat((0,_toConsumableArray2.default)(Object.entries(CHARSET_1).filter(function(e){e=(0,_slicedToArray2.default)(e,2);return(0,_slicedToArray2.default)(e[1],2)[1]==t}).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0],e=(0,_slicedToArray2.default)(e[1],1)[0];return"".concat(quoteKey(" "==t?"-":encodeLetter(t)),":`${").concat(e,"}`[").concat(globalVar,"]")})))})+"}",IDENT_SET1=(output+=RES_CHARSET_1,{concat:"+",call:"!",join:"%",slice:"/",return:"_",constructor:"$"}),CONSTRUCTORS={Array:"[]",Object:"{}",String:quote(""),Number:"(~[])",Boolean:"(![])",RegExp:"/./",Function:"(()=>{})"},CHARSET_2=_objectSpread({},CHARSET_1),_i2=0,_Object$entries2=Object.entries(CONSTRUCTORS);_i2<_Object$entries2.length;_i2++){var _Object$entries2$_i=(0,_slicedToArray2.default)(_Object$entries2[_i2],2),key=_Object$entries2$_i[0],_expression2=_Object$entries2$_i[1],index=void 0,_constructor=eval(key).toString(),_iterator2=_createForOfIteratorHelper(_constructor),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _char4=_step2.value;!/[\w\s]/.test(_char4)||_char4 in CHARSET_2||(CHARSET_2[_char4]=[_expression2,index=_constructor.indexOf(_char4)])}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}for(var _i3=0,_Object$entries3=Object.entries(CHARSET_2);_i3<_Object$entries3.length;_i3++){var value=_Object$entries3[_i3],_value=(0,_slicedToArray2.default)(value,2),_char5=_value[0],_value$=(0,_slicedToArray2.default)(_value[1],2),_expression3=_value$[0],_index=_value$[1],expansion="`${".concat(_expression3,"[").concat(globalVar,".$]}`[").concat("".concat(_index).split(_templateObject6=_templateObject6||(0,_taggedTemplateLiteral2.default)([""])).map(function(e){return"".concat(globalVar,".").concat(encodeDigit(e))}).join(_templateObject5=_templateObject5||(0,_taggedTemplateLiteral2.default)(["+"])),"]");_char5 in CHARSET_1||(CHARSET_2[_char5]=[_expression3,_index,expansion])}var objectDifference=function(t,e){return Object.fromEntries(_lodash.default.difference(_lodash.default.keys(t),_lodash.default.keys(e)).map(function(e){return[e,t[e]]}))},CHARSET_2_DIFF=objectDifference(CHARSET_2,CHARSET_1),RES_CHARSET_2="".concat(globalVar,"={...").concat(globalVar,",")+Object.entries(CHARSET_2_DIFF).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0],e=(0,_slicedToArray2.default)(e[1],3)[2];return"".concat(quoteKey(encodeLetter(t)),":").concat(e)})+"}",encodeString=function(){return(0,_toConsumableArray2.default)("".concat(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").replace(/\W/g,"")).map(function(e){return/[$_]/.test(e)?quote(e):/\d/.test(e)?"".concat(globalVar,".").concat(encodeDigit(e)):(e=encodeLetter(e),(0,_isValidIdentifier.default)(e)?"".concat(globalVar,".").concat(e):"".concat(globalVar,"[").concat(quote(e),"]"))}).join(_templateObject7=_templateObject7||(0,_taggedTemplateLiteral2.default)(["+"]))},encodeIdentifiers=function(e){return"".concat(globalVar,"={...").concat(globalVar,",")+Object.entries(e).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0];return[e[1],encodeString(t)]}).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0],e=e[1];return"".concat(quoteKey(t),":").concat(e)})+"}"},IDENT_SET2=(output+=";"+encodeIdentifiers(IDENT_SET1),output+=";"+RES_CHARSET_2,{name:"?",map:"^",replace:":",repeat:"*",split:"|",indexOf:"#",source:"`"}),GLOBAL_FUNC=(output+=";"+encodeIdentifiers(IDENT_SET2),{eval:"=",escape:">",unescape:"<",parseInt:"~"}),RES_FUNCTIONS_1="".concat(globalVar,"={...").concat(globalVar,",")+Object.entries(GLOBAL_FUNC).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0],e=e[1];return"".concat(quoteKey(e),":")+"(()=>{})"+"[".concat(globalVar,".$]")+"("+"".concat(globalVar,"._+").concat(globalVar,"[").concat(quote("-"),"]+").concat(encodeString(t))+")()"})+"}",CIPHER_FROM=(output+=";"+RES_FUNCTIONS_1,output+=";"+"".concat(globalVar,"={...").concat(globalVar,",")+[[quoteKey("'"),"".concat(encodeString("to"),"+")+"".concat(quote(""),"[").concat(globalVar,".$]")+"[".concat(globalVar,"[").concat(quote("?"),"]]")],[quoteKey(encodeLetter("C")),"".concat(globalVar,"[").concat(quote(">"),"]")+"(".concat(quote("<"),")")+"[".concat(globalVar,".").concat(encodeDigit(2),"]")],[quoteKey(encodeLetter("D")),"".concat(globalVar,"[").concat(quote(">"),"]")+"(".concat(quote("="),")")+"[".concat(globalVar,".").concat(encodeDigit(2),"]")]].map(function(e){return e.join(_templateObject8=_templateObject8||(0,_taggedTemplateLiteral2.default)([":"]))})+"}","0123456789abcdefghijklmnopqrstuvwxyz"),IDENT_SET3=(output+=";"+"".concat(globalVar,"={...").concat(globalVar,",")+[[quoteKey(encodeLetter("U")),"`${{}[".concat(globalVar,"[").concat(quote("'"),"]]")+"[".concat(globalVar,"[").concat(quote("!"),"]]()}`")+"[".concat(globalVar,".").concat(encodeDigit(8),"]")]].concat((0,_toConsumableArray2.default)((0,_toConsumableArray2.default)("hkqwz").map(function(e){return[quoteKey(encodeLetter(e)),"(+(".concat(encodeString(CIPHER_FROM.indexOf(e)),"))")+"[".concat(globalVar,"[").concat(quote("'"),"]](").concat(encodeString(36),")")]}))).map(function(e){return e.join(_templateObject9=_templateObject9||(0,_taggedTemplateLiteral2.default)([":"]))})+"}",{fromCharCode:"@",keys:"&",toUpperCase:'"'}),CIPHER_TO=(output+=";"+encodeIdentifiers(IDENT_SET3),"_.:;!?*+^-=<>~'\"/|#$%&@{}()[]`\\"),IDENT_SET=_objectSpread(_objectSpread(_objectSpread({},IDENT_SET1),IDENT_SET2),IDENT_SET3),base31=function(a){return"".concat((0,_toConsumableArray2.default)(Array(a.length)).map(function(e,t){return(0,_toConsumableArray2.default)(a.charCodeAt(t).toString(31)).map(function(e){return CIPHER_TO[CIPHER_FROM.indexOf(e)]}).join(_templateObject10=_templateObject10||(0,_taggedTemplateLiteral2.default)([""]))}))},base31Decode=function(e){return String.fromCharCode.apply(String,(0,_toConsumableArray2.default)(e.split(_templateObject11=_templateObject11||(0,_taggedTemplateLiteral2.default)([","])).map(function(e){return parseInt((0,_toConsumableArray2.default)(e).map(function(e){return CIPHER_FROM[CIPHER_TO.indexOf(e)]}).join(_templateObject12=_templateObject12||(0,_taggedTemplateLiteral2.default)([""])),31)})))},ENCODING_MACRO="a=>a.split`,`.map(a=>parseInt([...a].map(a=>[...Array(+(31)).keys()].map(a=>a.toString(31))[CIPHER_TO.indexOf(a)]).join``,31)).map(a=>String.fromCharCode(a)).join``".replace("CIPHER_TO",quote(CIPHER_TO)).replace(/\.toString\b/g,function(e){return"[".concat(globalVar,"[").concat(quote("'"),"]]")}).replace(/\b\d+\b/g,function(e){return encodeString(e)}).replace("parseInt","".concat(globalVar,"[").concat(quote("~"),"]")).replace(/\ba\b/g,"_"+globalVar).replace(/\.\b(keys|split|map|indexOf|join|fromCharCode)\b/g,function(e){return"[".concat(globalVar,"[").concat(quote(IDENT_SET[e.slice(1)]),"]]")}).replace(/\b(Array|String)\b/g,function(e){return"".concat(CONSTRUCTORS[e],"[").concat(globalVar,".$]")}),RE_CONSTANTS=(output+=";"+"".concat(globalVar,"[+![]]=").concat(ENCODING_MACRO),["true","false","Infinity","NaN","undefined",Object.keys(IDENT_SET)].flat()),keyGen=_regenerator.default.mark(function e(){var t,a,r,n,o;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=".,:;!?*+^-=<>~'\"`/|\\#%&@()[]{}",a="0123456789abcdefghijklmnopqrstuvwxyz",r=_createForOfIteratorHelper("()[]{}"),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=10;break}return n=n.value,e.next=8,n;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:o=0;case 19:if(o<=Number.MAX_SAFE_INTEGER)return e.next=22,o.toString(t.length).padStart(2,0).split(_templateObject14=_templateObject14||(0,_taggedTemplateLiteral2.default)([""])).map(function(e){return t[a.indexOf(e)]}).join(_templateObject13=_templateObject13||(0,_taggedTemplateLiteral2.default)([""]));e.next=25;break;case 22:o++,e.next=19;break;case 25:case"end":return e.stop()}},e,null,[[2,12,15,18]])})(),WORD_LIST=(_ref37=null!=(_code$match=code.match(REGEXPS.word))?_code$match:[],_ref36=Object.entries(_lodash.default.countBy(_ref37)).filter(function(e){e=(0,_slicedToArray2.default)(e,1)[0];return!Object.keys(IDENT_SET).includes(e)}).sort(function(e,t){e=(0,_slicedToArray2.default)(e,2)[1];return(0,_slicedToArray2.default)(t,2)[1]-e}).map(function(e){return[(0,_slicedToArray2.default)(e,1)[0],keyGen.next().value]}),Object.fromEntries(_ref36)),expression=(output+=";"+"".concat(globalVar,"={...").concat(globalVar,",")+Object.entries(WORD_LIST).map(function(e){var e=(0,_slicedToArray2.default)(e,2),t=e[0],e=e[1];return"".concat(quoteKey(e),":").concat(globalVar,"[+![]](").concat(quote(base31(t)),")")})+"}","["+code.split(_templateObject15=_templateObject15||(0,_taggedTemplateLiteral2.default)([" "])).map(function(e){return(0,_toConsumableArray2.default)(e.matchAll(REGEXP)).map(function(e){var t,a,r;switch(e=(0,_slicedToArray2.default)(Object.entries(e.groups).filter(function(e){return!!(0,_slicedToArray2.default)(e,2)[1]})[0],2),t=e[0],a=e[1],t){case"word":switch(!0){case/\b[\da-zA-FINORSU]\b/.test(a):return encodeString(a);case"string"==typeof CONSTANTS[a]:return"`${".concat(CONSTANTS[a],"}`");case"string"==typeof CONSTRUCTORS[a]:return"".concat(CONSTRUCTORS[a],"[").concat(globalVar,".$][").concat(globalVar,"[").concat(quote("?"),"]]");case"string"==typeof IDENT_SET[a]:return(0,_isValidIdentifier.default)(IDENT_SET[a])?globalVar+"."+IDENT_SET[a]:globalVar+"[".concat(quote(IDENT_SET[a]),"]");default:return"".concat(globalVar,"[").concat(quote(WORD_LIST[a]),"]")}break;case"unicode":return r=base31(a),"".concat(globalVar,"[+![]](").concat(quote(r),")");default:return quote(a)}}).join(_templateObject16=_templateObject16||(0,_taggedTemplateLiteral2.default)(["+"]))})+"]"+"[".concat(globalVar,"[").concat(quote("%"),"]]")+"(".concat(globalVar,"[").concat(quote("-"),"])"));return output+=";"+"_".concat(globalVar,"=").concat(expression),output+=";module.exports.result=_"+globalVar,{result:output,stats:"=====\nSTATS\n=====\nInput length: ".concat(enUS.format(code.length),"\nExpression length: ").concat(enUS.format(expression.length),"\nRatio: ").concat(expression.length/code.length,"\nOutput length: ").concat(enUS.format(output.length))}}var _encodeText=encodeText(text,"$",{strictMode:!0,quoteStyle:"smart backtick",accessor:!1}),result=_encodeText.result,stats=_encodeText.stats;print(stats),_fs.default.writeFileSync("./output.js",result);